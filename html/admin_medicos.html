<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Administraci√≥n de M√©dicos</title>
  <link rel="icon" type="image/png" href="../imagenes/logovientonorte.png" />

  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  
  <link rel="stylesheet" href="../css/index.css"/>
 
  <link rel="stylesheet" href="admin_medicos.css"/>
  <script src="../js/admin-guard.js"></script>
</head>

<body class="layout-admin bg-light">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="index.html">
        <img src="../imagenes/logovientonorte.png" alt="Logo Cl√≠nica Viento Norte" height="60" class="me-2"/>
        <span>Cl√≠nica Viento Norte</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#botoncitoNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse botoncito-collapse" id="botoncitoNav">
        <ul class="navbar-nav ms-auto botoncito-menu">
          <li class="nav-item"><a class="nav-link botoncito-link" href="index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link botoncito-link" href="institucional.html">Institucional</a></li>
          <li class="nav-item"><a class="nav-link botoncito-link" href="reservas.html">Reservas</a></li>
          <li class="nav-item"><a class="nav-link botoncito-link" href="contacto.html">Contacto</a></li>
          
          <li class="nav-item"><a class="nav-link botoncito-link" href="usuarios.html">Usuarios</a></li>
          
          <li class="nav-item ms-lg-2">
            <a class="nav-link active" href="admin_medicos.html" title="Administraci√≥n de m√©dicos">
              <i class="bi bi-gear"></i><span class="d-lg-none ms-1">Admin. M√©dicos</span>
            </a>
          </li>
          
          <li class="nav-item ms-3" id="logout-item" style="display: none;">
            <button id="logoutBtn" class="btn btn-outline-light btn-sm">Cerrar sesi√≥n</button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Contenido principal -->
  <main class="container my-5">
    <section class="mb-4">
      <h2 class="text-center text-primary">Administraci√≥n de M√©dicos</h2>
      <p class="text-center text-muted">Alta, baja y modificaci√≥n de profesionales.</p>
    </section>
    <!-- Formulario -->
  <form id="formMedico" class="row g-3 mb-4">
    <input type="hidden" id="medicoId" />
    <div class="mb-3">
      <label for="matricula" class="form-label">Matr√≠cula</label>
      <input type="text" class="form-control" id="matricula" required>
    </div>
    <div class="col-md-6">
      <label for="nombre" class="form-label">Nombre completo</label>
      <input type="text" id="nombre" class="form-control" required />
    </div>
    <div class="col-md-6">
      <label for="especialidad" class="form-label">Especialidad</label>
      <input type="text" id="especialidad" class="form-control" required />
    </div>
    <div class="mb-3">
       <label for="email" class="form-label">Email</label>
       <input type="email" class="form-control" id="email" required>
    </div>
    <div class="mb-3">
       <label for="valorConsulta" class="form-label">Valor de Consulta ($)</label>
       <input type="number" step="0.01" class="form-control" id="valorConsulta" required>
    </div>
    <div class="mb-3">
       <label for="obrasSociales" class="form-label">IDs Obras Sociales (separar por comas: Ej. 1, 2, 3)</label>
       <input type="text" class="form-control" id="obrasSociales" placeholder="Ej: 1, 2, 3">
    </div>
    <div class="col-12">
      <label for="descripcion" class="form-label">Descripci√≥n</label>
      <textarea id="descripcion" class="form-control" required></textarea>
    </div>
    <div class="col-12">
      <label for="imagen" class="form-label">URL de la imagen</label>
      <input type="url" id="imagen" class="form-control" required />
    </div>
    <div class="col-12 text-end">
      <button type="submit" class="btn btn-primary">Guardar M√©dico</button>
    </div>
  </form>

    <!-- Tabla de M√©dicos -->
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead class="table-primary">
          <tr>
              <th>ID</th>
              <th>Matr√≠cula</th>       
              <th>Nombre</th>
              <th>Especialidad</th>
              <th>Email</th>           
              <th>Valor Consulta</th>  
              <th>Obras Sociales</th>  
              <th>Descripci√≥n</th>
              <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaMedicosBody">
          <!-- tabla dinamica -->
        </tbody>
      </table>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-primary text-white text-center py-3 mt-5">
  <p class="mb-0">&copy; 2025 Cl√≠nica Viento Norte - Todos los derechos reservados.</p>
</footer>

<script>
// Toggle persistente y √∫nico
(function(){
  const KEY='theme';
  function apply(mode){
    const isDark = (mode === 'dark');
    document.documentElement.classList.toggle('dark-mode', isDark);
    document.body.classList.toggle('dark-mode', isDark);
    localStorage.setItem(KEY, mode);
    const b=document.getElementById('themeToggle');
    if(b){ b.textContent=isDark?'‚òÄÔ∏è':'üåô'; b.title=isDark?'Modo claro':'Modo oscuro'; }
  }
  const initial = localStorage.getItem(KEY) || 'light';
  apply(initial);
  window.toggleTheme = () => apply(document.documentElement.classList.contains('dark-mode') ? 'light' : 'dark');
})();
</script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


  <!-- Script JS de M√©dicos -->
  <script src="../js/medicos.js"></script>

<script>
(function() {
  
  const token = sessionStorage.getItem('accessToken');
  const logoutItem = document.getElementById('logout-item');
  
  if (token) {
    // Si est√° logueado, mostramos el bot√≥n
    if(logoutItem) logoutItem.style.display = 'block';
  }

  const logoutBtn = document.getElementById('logoutBtn');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
      sessionStorage.clear(); // Borra el token
      window.location.href = 'login.html'; // Lo manda al login
    });
  }
})();
</script>

<button id="themeToggle" class="dark-toggle" onclick="toggleTheme()" aria-label="Cambiar modo" title="Modo oscuro/clarito">üåô</button>
</body>
</html>